{% extends 'base.html' %}
{% load static %}
{% block simulator_content %}

<div class="container mt-4">
    {% include 'simulator_config.html' %}

    <div id="lineups-section" style="display: none;">
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Position</th>
                        <th>Player</th>
                        <th>Team</th>
                        <th>Opponent</th>
                        <th>Salary</th>
                        <th>Proj. Pts</th>
                        <th>Own %</th>
                    </tr>
                </thead>
                <tbody id="lineup-body">
                </tbody>
            </table>
        </div>

        <div class="lineup-summary">
            <div class="row">
                <div class="col-md-3">
                    <strong>Total Salary:</strong> <span id="total-salary">$0</span>
                </div>
                <div class="col-md-3">
                    <strong>Projected Points:</strong> <span id="total-projected">0</span>
                </div>
                <div class="col-md-3">
                    <strong>Stack:</strong> <span id="lineup-stack">-</span>
                </div>
                <div class="col-md-3">
                    <strong>Ownership Sum:</strong> <span id="ownership-sum">0%</span>
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex justify-content-between align-items-center my-3">
        <div>
            <button id="prev-lineup" class="btn btn-navigation">Previous</button>
            <button id="next-lineup" class="btn btn-navigation">Next</button>
        </div>
        <div>
            Lineup <span id="current-lineup">1</span> of <span id="total-lineups">0</span>
        </div>
        <div>
            <button id="reupload-btn" class="btn btn-primary">Re-upload Files</button>
            <a href="#" id="download-csv" class="btn btn-secondary" style="display: none;">
                Download Lineups
            </a>
            <a href="#" id="download-exposures" class="btn btn-secondary" style="display: none;">
                Download Exposures
            </a>
        </div>
    </div>

    <div id="loading-overlay" class="position-fixed top-0 start-0 w-100 h-100" style="display: none;">
        <div class="position-absolute top-50 start-50 translate-middle text-center">
            <div class="spinner-border text-primary mb-2" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <div>
                Running simulation...
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<!-- Load config handling first -->
<script src="{% static 'js/simulator-config.js' %}"></script>
<!-- Then load lineup handling -->
<script src="{% static 'js/simulator-lineups.js' %}"></script>
{% endblock %}
